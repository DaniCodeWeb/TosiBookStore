<nav class="bg-white shadow-md fixed w-full z-50">
  <div class="max-w-7xl mx-auto px-4">
    <div class="flex justify-between h-16">
      <div class="flex items-center">
        <a href="/" class="flex-shrink-0">
          <img class="h-12 w-auto" src="/src/assets/img/Tosilogo1.png" alt="TOSI" />
        </a>
      </div>

      <!-- Menú para desktop -->
      <div id="section-links" class="hidden lg:flex items-center space-x-6">
        <a href="#libros" class="nav-link" title="Libros">
          <svg class="h-5 w-5 md:mr-0 lg:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="hidden md:hidden lg:inline">Libros</span>
        </a>
        <a href="#novedades" class="nav-link" title="Novedades">
          <svg class="h-5 w-5 md:mr-0 lg:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>
          <span class="hidden md:hidden lg:inline">Novedades</span>
        </a>
        <a href="#categorias" class="nav-link" title="Categorias">
          <svg class="h-5 w-5 md:mr-0 lg:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
          </svg>
          <span class="hidden md:hidden lg:inline">Categorias</span>
        </a>
        <a href="#preventas" class="nav-link" title="Preventas">
          <svg class="h-5 w-5 md:mr-0 lg:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span class="hidden md:hidden lg:inline">Preventas</span>
        </a>
        <a href="#testimonios" class="nav-link" title="Testimonios">
          <svg class="h-5 w-5 md:mr-0 lg:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
          </svg>
          <span class="hidden md:hidden lg:inline">Testimonios</span>
        </a>
        <a href="#contactos" class="nav-link" title="Contáctanos">
          <svg class="h-5 w-5 md:mr-0 lg:mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          <span class="hidden md:hidden lg:inline">Contáctanos</span>
        </a>
      </div>

      <!-- Menú para páginas específicas (no secciones) -->
      <div id="page-links" class="hidden md:hidden lg:hidden items-center space-x-6">
        <a href="/" class="nav-link" title="Inicio">
          <svg class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
          <span>Inicio</span>
        </a>
        <a href="javascript:history.back()" class="nav-link" title="Volver">
          <svg class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
          </svg>
          <span>Volver</span>
        </a>
      </div>

      <!-- Menú para mobile -->
      <div class="lg:hidden flex items-center">
        <button id="mobile-menu-button" class="text-gray-700 hover:text-yellow-500">
          <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>

      <div class="flex items-center space-x-4">
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-blue-800" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
          </svg>
        </div>
        <button id="login-button" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors duration-200">Mi cuenta</button>
      </div>
    </div>
  </div>

  <!-- Menú mobile desplegable -->
  <div id="mobile-menu" class="hidden lg:hidden bg-white shadow-lg">
    <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
      <!-- Sección de enlaces para secciones -->
      <div id="mobile-section-links">
        <!-- Libros -->
        <a href="#libros" class="mobile-nav-link group" title="Libros">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />
          </svg>
          <span class="ml-3">Libros</span>
        </a>

        <!-- Novedades -->
        <a href="#novedades" class="mobile-nav-link group" title="Novedades">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z" />
          </svg>
          <span class="ml-3">Novedades</span>
        </a>

        <!-- Categorías -->
        <a href="#categorias" class="mobile-nav-link group" title="Categorías">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z" />
          </svg>
          <span class="ml-3">Categorías</span>
        </a>

        <!-- Preventas -->
        <a href="#preventas" class="mobile-nav-link group" title="Preventas">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          <span class="ml-3">Preventas</span>
        </a>

        <!-- Testimonios -->
        <a href="#testimonios" class="mobile-nav-link group" title="Testimonios">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z" />
          </svg>
          <span class="ml-3">Testimonios</span>
        </a>

        <!-- Contáctanos -->
        <a href="#contactos" class="mobile-nav-link group" title="Contáctanos">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
          </svg>
          <span class="ml-3">Contáctanos</span>
        </a>
      </div>

      <!-- Sección de enlaces para páginas específicas -->
      <div id="mobile-page-links" class="hidden">
        <!-- Inicio -->
        <a href="/" class="mobile-nav-link group" title="Inicio">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
          </svg>
          <span class="ml-3">Inicio</span>
        </a>

        <!-- Volver -->
        <a href="javascript:history.back()" class="mobile-nav-link group" title="Volver">
          <svg class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
          </svg>
          <span class="ml-3">Volver</span>
        </a>
      </div>
    </div>
  </div>
</nav>

<style>
  /* Estilos para los links de navegación */
  .nav-link, .mobile-nav-link {
    @apply text-gray-700 hover:text-yellow-500 transition-all duration-200 px-3 py-2 rounded-lg flex items-center gap-2;
  }

  .nav-link.active, .mobile-nav-link.active {
    @apply text-yellow-500 font-semibold bg-yellow-50 shadow-md ring-1 ring-yellow-300;
  }

  .nav-link span, .mobile-nav-link span {
    @apply transition-all duration-200;
  }

  .nav-link:hover span, .mobile-nav-link:hover span {
    @apply scale-105;
  }

  /* Estilos para tablets (solo iconos) */
  @media (min-width: 768px) and (max-width: 1023px) {
    .nav-link {
      @apply relative;
    }

    /* Tooltip efecto para mostrar texto en hover */
    .nav-link:hover::after {
      content: attr(title);
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.8);
      color: white;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 14px;
      white-space: nowrap;
      z-index: 100;
      margin-top: 8px;
    }

    /* Triángulo para el tooltip */
    .nav-link:hover::before {
      content: '';
      position: absolute;
      top: calc(100% - 1px);
      left: 50%;
      transform: translateX(-50%);
      border-width: 6px;
      border-style: solid;
      border-color: transparent transparent rgba(0,0,0,0.8) transparent;
      z-index: 101;
    }
  }
</style>

<script is:inline>
  document.addEventListener('DOMContentLoaded', function() {
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('.nav-link, .mobile-nav-link');
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    const sectionLinks = document.getElementById('section-links');
    const pageLinks = document.getElementById('page-links');
    const mobileSectionLinks = document.getElementById('mobile-section-links');
    const mobilePageLinks = document.getElementById('mobile-page-links');

    // Detectar si estamos en una página específica o en la página principal con secciones
    function isSpecificPage() {
      // Si la URL contiene una extensión de archivo o termina con una barra seguida de un texto sin "#"
      // asumimos que es una página específica y no una sección
      const path = window.location.pathname;
      const hash = window.location.hash;

      // Si hay una extensión de archivo en la ruta (excepto .html en la raíz) o no hay hash
      return (path.includes('.') && path !== '/index.html') ||
             (path !== '/' && path !== '/index.html' && !hash);
    }

    // Función para mostrar los enlaces adecuados según si estamos en una página o sección
    function updateNavLinks() {
      if (isSpecificPage()) {
        // Estamos en una página específica
        sectionLinks.classList.add('hidden');
        pageLinks.classList.remove('hidden', 'md:hidden', 'lg:hidden');
        pageLinks.classList.add('md:flex', 'lg:flex');

        mobileSectionLinks.classList.add('hidden');
        mobilePageLinks.classList.remove('hidden');
      } else {
        // Estamos en la página principal con secciones
        sectionLinks.classList.remove('hidden');
        pageLinks.classList.add('hidden', 'md:hidden', 'lg:hidden');

        mobileSectionLinks.classList.remove('hidden');
        mobilePageLinks.classList.add('hidden');
      }
    }

    // Menú mobile
    mobileMenuButton?.addEventListener('click', function() {
      mobileMenu?.classList.toggle('hidden');
    });

    // Scroll spy para activar los enlaces según la sección visible
    function updateActiveLink() {
      if (isSpecificPage()) return; // No hacer scroll spy en páginas específicas

      let current = '';
      const scrollPosition = window.scrollY + 100;

      sections.forEach(section => {
        const sectionTop = section.offsetTop;
        const sectionHeight = section.clientHeight;
        const sectionId = section.id;

        if (sectionId && scrollPosition >= sectionTop && scrollPosition < sectionTop + sectionHeight) {
          current = sectionId;
        }
      });

      navLinks.forEach(link => {
        link.classList.remove('active');
        const linkHref = link.getAttribute('href');
        if (linkHref && linkHref === `#${current}`) {
          link.classList.add('active');
        }
      });
    }

    // Inicializar y configurar eventos
    updateNavLinks();
    updateActiveLink();

    window.addEventListener('scroll', updateActiveLink);
    window.addEventListener('resize', updateActiveLink);
    window.addEventListener('popstate', updateNavLinks); // Para cuando se use el botón atrás

    // También actualizar al cambiar de hash (para navegación en la misma página)
    window.addEventListener('hashchange', function() {
      updateNavLinks();
      updateActiveLink();
    });
  });
</script>
